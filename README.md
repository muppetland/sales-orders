# sales-orders
Instrucciones para la utilización de la colección de APIs del ejercicio del documento “Staff Backend Software Engineer - Technical Challenge (003).pdf”

Lo que deben considerar es que las APIs son enrutadas por medio de un Gateway que apunta a la dirección localhost:6661, esta compuerta permitirá enrutar el trafico de las peticiones que se hagan de los 3 servicios que se tienen para la ejecución de este proyecto, para temas de buenas prácticas los puertos no se han expuesto de los microservicios a excepto el del servidor eureka, mysql server y api Gateway, todos los demás contenedores están ocultos, la única manera de acceder a ellos es mediante las rutas que se definieron en la colección de endpoints que se incluyen en la carpeta utils de la raíz del repositorio.

El esquema de la base de datos se construye de manera automática al realizar el primer despliegue de los microservicios, de igual manera los scripts y un diagrama sencillo del esquema de la base de datos se encuentra dentro del repositorio en la carpeta utils de la raíz del repositorio.

La versión de java que se utiliza en este proyecto es la versión 17, de igual manera el proyecto contiene comunicaciones entre los microservicios mediante webClient, se tiene documentación de las 3 instancias del proyecto, estás están apoyada con swagger y las rutas se encuentran en la colección de postman para su consulta y puedan revisar el tipo de dato que se solicita en cada endpoint, las pruebas unitarias se realizaron a nivel CRUD.

Una vez indicado lo anterior, basta con ejecutar desde su terminal el archivo “Docker-compose.yml” que se encuentra en raíz del repositorio y con eso podrán iniciar la validación del proyecto, de igual manera se incluyen algunas evidencias del despliegue del proyecto en Docker y la manera en que están intercomunicadas y funcionando de manera correcta en base a la solicitud del documento enviado.

¿Por dónde empezar a validar los endpoint?
Bien, al ser un proyecto muy sencillo se manejaron 3 APIs, las cuales son las siguientes y en ese orden deberán ser invocadas para poder generar una orden de venta de manera correcta, dentro de la carpeta “utils” existe una carpeta llamada “postmanCollection”, dentro de esta el archivo con la colección de los endpoints que podrán validar, dentro de la colección existen carpetas y cada una de ellas contiene los endpoints asociados a cada API. 

Carpeta Customers: Esta hace referencia al API “customers-api”, esta colección nos permitirá registrar un cliente para que pueda ser utilizada en la orden a generar, para ellos deberán registrar primeramente un cliente mediante el endpoint “newCustomer”, si se desea consultar el cliente previamente registrado lo podrán realizar mediante el endpoint “getCustomerByID”, si se desea consultar todos los clientes registrados se utiliza el endpoint “getAllCustomers”, si se desea modificar el cliente registrado lo podrán realizar mediante el endpoint “updateCustomer” y por último si se desea eliminar el cliente se podrá realizar mediante el endpoint “deleteCustomer”, el tipo de datos aceptados en los body de los objetos y otras características se encuentran indicados en la documentación de esta API en el endpoint “swagger-docs”

Carpeta Products: Esta hace referencia al API “products-api”, esta colección nos permitirá registrar un producto para que pueda ser utilizada en la orden a generar, para ellos deberán registrar primeramente un producto mediante el endpoint “newProduct”, si se desea consultar el producto previamente registrado lo podrán realizar mediante el endpoint “getProuctByID”, si se desea consultar todos los productos registrados lo podrán realizar mediante el endpoint “getAllProducts”, si se desea modificar el producto registrado lo podrán realizar mediante el endpoint “updateProduct” y por último si se desea eliminar el cliente se podrá realizar mediante el endpoint “deleteProduct”, el tipo de datos aceptados en los body de los objetos y otras características se encuentran indicados en la documentación de esta API en el endpoint “swagger-docs”.

Carpeta Orders: Esta hace referencia al API “orders-api”, esta colección nos permitirá registrar una orden de venta, para que puedan registrar una orden de venta previamente deberán tener clientes y productos registrados, una vez que se tiene esa información primero se deberán registrar una orden de venta mediante el endpoint “newOrder”, si se desea consultar la información de una orden mediante su ID se podrá realizar mediante el endpoint “getOrderByID”, si se desea consultar el listado de ordenes de ventas por la fecha de venta lo podrán realizar mediante el endpoint “getOrderByPurchaseDate”, de igual manera si se desea consultar las ordenes de venta que han sido canceladas lo podrán realizar mediante el endpoint “getAllOrdersByCancellationDate”, tanto el endpoint “getOrderByPurchaseDate” y este último aceptan la fecha en formato “dd/MM/yyyy” y otros parámetros adicionales que no son requeridos pero los pueden utilizar en caso de agregar más de 10 registros y estos estén paginados y por último si se desea cancelar la orden de venta se podrá realizar mediante el endpoint “cancelOrder”, el tipo de datos aceptados en los body de los objetos y otras características se encuentran indicados en la documentación de esta API en el endpoint “swagger-docs”

Consideraciones
Los siguientes endpoints, son utilizados por el API “orders-api” de manera automática y para realizar validaciones a lo internos de la orden de venta que se vaya a gestionar, estos son: 
a).- “updateProductPurchase” y “updateProductCancelledPurchase”, estos se utilizan para administrar el stock de los productos, estos los utiliza el API “orders-api” de manera automática.
b).- “getCustomerByName”, se utiliza para la búsqueda del producto a registrar en la orden de venta ya que el documento técnico indica que el body deberá ser ingresado el nombre del producto, más no el id del producto.


